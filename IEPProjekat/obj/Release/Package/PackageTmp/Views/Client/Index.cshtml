@model List<IEPProjekat.Models.QuestionCategoriesClass>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutLoggedIn.cshtml";
}
    <script>
        function CallChangefunc(val) {
            window.location.href = "/Client/filterCategory?category=" + val;
        }
    </script>
<h2>Index</h2>

    <div class="row">
        <div class="col-3">
            <button onclick="location.href='@Url.Action("goToAskQuestion", "Client")'" type="button" class="btn btn-primary">Ask a question!</button>
        </div>
    </div>
    <div class="row">
        <div class="col">
            @Html.DropDownList("category", new SelectList(ViewBag.Questions.categories, ViewBag.Questions.selected),
            new { @onchange = "CallChangefunc(this.value)" })
        </div>
    </div>
    <div class="row">
        <div class="col">
            @{
                int index = 0;
                foreach (var question in ViewBag.Questions.qp.Items)
                {
                    Html.RenderPartial("~/Views/Shared/OneQuestion.cshtml", new ViewDataDictionary(question));
                    index++;
                }
            }

            @if (ViewBag.Questions.qp.Pager.EndPage > 1)
            {
                <ul class="pagination">
                    @if (ViewBag.Questions.qp.Pager.CurrentPage > 1)
                    {
                        <li>
                            <a href="~/Client/Index">First</a>
                        </li>
                        <li>
                            <a href="~/Client/Index?page=@(ViewBag.Questions.qp.Pager.CurrentPage - 1)">Previous</a>
                        </li>
                    }

                    @for (var page = ViewBag.Questions.qp.Pager.StartPage; page <= ViewBag.Questions.qp.Pager.EndPage; page++)
                    {
                        <li class="@(page == ViewBag.Questions.qp.Pager.CurrentPage ? "active" : "")">
                            <a href="~/Client/Index?page=@page">@page</a>
                        </li>
                    }

                    @if (ViewBag.Questions.qp.Pager.CurrentPage < ViewBag.Questions.qp.Pager.TotalPages)
                    {
                        <li>
                            <a href="~/Client/Index?page=@(ViewBag.Questions.qp.Pager.CurrentPage + 1)">Next</a>
                        </li>
                        <li>
                            <a href="~/Client/Index?page=@(ViewBag.Questions.qp.Pager.TotalPages)">Last</a>
                        </li>
                    }
                </ul>
            }

        </div>
    </div>
